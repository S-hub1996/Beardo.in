<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CART</title>
    <link rel="stylesheet" href="./cart.css">
    <style>
        *{
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        }
        #navbar{
            margin-left: -8px;
        }
        #cart{
            margin: auto;
            width: 1200px;
            border: 1px solid rgb(233, 219, 219);
            margin-top: 100px;
            
        }
        #noitems{
            text-align:center; 
            font-size: 32px; 
            color: rgb(182, 179, 179); 
        }
        #recommended{
            margin: auto;
            width: 800px;
            height: 500px;
            text-align: center;
            overflow: scroll;
            display: flex;

        }
        #deliverycheck{
            font-size: 16px;
            margin: auto;
            margin-top: 50px;
            width: 900px;
            display: flex;
            justify-content: space-between;
            background: rgb(233, 229, 229);
        }
        #check{
            width: 300px;
            font-size: 16px;
            outline: rgb(233, 229, 229);
        }
        #header1_input{
            outline: none;
            font-size: 20px;
        }
        #search_input_div{
            margin-right: 100px;
        }
        .productDiv{
            width: 250px;
            height: 90%;
            border: 1px solid red;
        }
        .productImage{
            width: 20%;
        }
        .addtocartbutton{
            background: red;
            color: white;
        }
        #cartdown{
            margin: auto;
            width: 950px;
            height: 600px;
            border: 1px solid rgb(233, 229, 229);
        }
        h2{
            text-align: center;
            font-size: 28px;
        }
        #dummy{
            color: rgb(92, 88, 88);
        }
        #nothing{
            height: 50px;
        }
    </style>
</head>
<body>
    <div id="navbar"></div>
    <br>
    <div id="cart">
        <h4 id="noitems">No Items In The Cart &#9785</h4>
        <div><script src="./cart.js"></script></div>
    </div>
    <br>
    
<div ID="cartdown">
        <h2>RECOMMENDED</h2>
        <div id="recommended"></div>
    </div> 

    <div id="deliverycheck">
        <p style="margin-left: 10px; color: rgb(167, 163, 163)">Estimated Delivery Date</p>
        <input id="check" type="number", placeholder="Pincode" />
    </div>
    <div id="nothing"></div>
    </body>
</html>

<script type="module">
    import header from "./components/header1.js";
    console.log(header);
    let cartHeader = document.getElementById('navbar');
    cartHeader.innerHTML = header();

    import { mostWantedCombosProdObj } from "./components/cartdata.js";
    console.log(mostWantedCombosProdObj);
    
    let parent = document.getElementById("recommended");

    const append = (recommended, parent) => {
    parent.innerHTML = null;

    mostWantedCombosProdObj.forEach(( {  imageUrl, name, discountSticker, price, cutPrice } ) =>{
        let div = document.createElement("div");
        div.style.marginRight = "18px";
        div.style.marginTop = "10px";
        div.style.backgroundColor = "white";
        div.style.borderRadius = "5px";
        div.style.border = "1px solid rgb(233, 229, 229)";
        div.setAttribute('id', 'minicontainer');

        let img = document.createElement("img");
        img.src = imageUrl;
        img.width = "200"
        img.setAttribute("id", "image");


        let title = document.createElement("h2");
        title.innerText = name;
        title.style.fontSize = "16px";
        title.style.color = "rgb(168, 161, 161)";
        title.setAttribute('id', 'name');


        let strikeOffPrice = document.createElement("img");
        strikeOffPrice.src = discountSticker;
        strikeOffPrice.setAttribute('id', 'disc');

       

        let mainPrice = document.createElement("h5");
        mainPrice.innerText = price;
        mainPrice.style.color = "red";
        mainPrice.style.fontSize= "24px";
        mainPrice.setAttribute('id', 'price');

        let cutOffPrice = document.createElement("h5");
        cutOffPrice.innerText = cutPrice;
        cutOffPrice.style.color = "rgb(92, 88, 88)";
        cutOffPrice.style.fontSize = "18px";
        cutOffPrice.setAttribute('id', 'cutoffprice');
        



        let button = document.createElement("button");
        button.setAttribute('id', 'addtocart');
        button.innerText = `ADD TO CART`;
        button.style.backgroundColor = "red";
        button.style.color = "white";
        button.style.width = "100%";
        button.style.height = "50px";
        button.style.borderRadius = "2px";
        button.style.fontStretch = "20px";
        button.style.border = "none";
        button.style.fontSize = "18px";
        button.style.fontWeight = "bold";

        
        
        
        div.append(img, title, cutOffPrice, mainPrice, button);
        parent.append(div);
    }) 
    
}

    append(recommended, parent);


    document.querySelector("#addtocart").addEventListener("click", tocart);
    
    var cartitems = JSON.parse(localStorage.getItem("cartitemsinpage")) || [];
    function tocart(event){
        let productname = document.querySelector("#name");
        let productimage = document.querySelector("#image");
        let productprice = document.querySelector("#price");
        let productsprice = document.querySelector("#cutoffprice");
    
        let pobj = {
            pname: productname,
            pimage: productimage,
            pprice: productprice,
            psprice: productsprice,
        };
        cartitems.push(pobj);
        localStorage.setItem("cartitemsinpage", JSON.stringify(cartitems));
    }
    
</script>

<script>
//    var arr = JSON.parse(localStorage.getItem("cartdata")) || [];
//    console.log(arr);
//    arr.forEach(( {img_url, name, price} ) => {

//     let maindiv = document.createElement("div");
//     maindiv.setAttribute('id', 'maindiv');


//        let div2 = document.createElement("div");
//        div2.setAttribute('id', 'div2');
       
//        let image = document.createElement("img");
//        image.src = img_url;
//        image.setAttribute('id', 'cartimage')

//        let div3 = document.createElement("div");
//        div3.setAttribute('id', 'div3');
//        let cptitle = document.createElement("h2");
//        cptitle.innerText = name;
//        cptitle.setAttribute('id', 'carttitle')

//        let cpprice = document.createElement("h5");
//        cpprice.innerText = price;
//        cpprice.setAttribute('id', 'cartprice');

//        let div4 = document.createElement("div");
//        div4.setAttribute('id', 'div4');
       
//        let dbtn = document.createElement('button');
//        dbtn.innerText = "-";
//        dbtn.setAttribute('id', 'dbtn');

//        let quantity = document.createElement("p");
//        quantity.innerText = "QTY";
//        quantity.setAttribute('id', 'quantity');

//        let ibtn = document.createElement("button");
//        ibtn.innerText = "+";
//        ibtn.setAttribute('id', 'ibtn');

//        let remove = document.createElement('button');
//        remove.innerText = "REMOVE";
//        remove.setAttribute('id', 'remove');

//        let div5 = document.createElement("div");
//        div5.setAttribute('id', 'div5');

//        let coupon = document.createElement("select");
//        coupon.innerText = `50% DISCOUNT COUPON`;
//        coupon.setAttribute('id', 'coupon');

//        let pricedetails = document.createElement("p");
//        pricedetails.innerText = `PRICE DETAILS`;
//        pricedetails.setAttribute('id', 'pricedetails');

//        let subtotal = document.createElement('div');
//        subtotal.innerText = `SubTotal`;
//        subtotal.setAttribute('id', 'subtotal');

//        let dcharges = document.createElement('div');
//        dcharges.innerText = `Delivery Charges`;
//        dcharges.setAttribute('id', 'dcharges');

//        let youpay = document.createElement('div');
//        youpay.innerText = `You Pay`;
//        youpay.setAttribute('id', 'youpay');

//        let placeorder = document.createElement('button');
//        placeorder.innerText = `Place Order`;
//        placeorder.setAttribute('id', 'placeorder');

//     div5.append(coupon, pricedetails, subtotal, dcharges, youpay, placeorder);
//        div4.append(dbtn, quantity, ibtn, remove)
//        div3.append(cptitle, cpprice, div4);
//        div2.append(image, div3);
//        maindiv.append(div2, div5);
//        cart.append(maindiv);
//    })
</script>