<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEARCH</title>
    <link rel="stylesheet" href="./search.css">
</head>
<body>
    <div id="mcontainer">
        <div id="searchbar">
            <input type="text" placeholder="Search for a Product" id="searchproduct" onkeypress="showdata()" >
            <div id="cross">&#10006</div>
        </div>
        <br>
        <div id="browse">
            <p id="bc">Browse Categories</p>
            <br>
            <div id="sitems"></div>
        </div>
        <br>
        <div id="magic">
            <p id="tp">Trending Products</p>
            <div id="scrollingdivs"></div>
        </div>
    </div>
</body>
</html>

<script type="module">
    import { facedata } from "./components/searchdata.js";
    console.log(facedata);

    let parent = document.getElementById("sitems");

    const append = ( sitems, facedata ) =>{
        parent.innerHTML = null;

        facedata.forEach(({ img_url, name }) => {
            let mdiv = document.createElement('div');
            mdiv.setAttribute('id', 'mdiv');

            let image = document.createElement("img");
            image.src = img_url;
            image.setAttribute('id', 'image');

            let title = document.createElement("h5");
            title.innerText = name;
            title.setAttribute('id', 'title');

            mdiv.append(image, title);
            parent.append(mdiv);
        })
    }

    append(sitems, facedata);
</script>

<script type="module">

    import { searcharr } from "./components/searchdata.js";
    console.log(searcharr);

    let parent2 = document.getElementById("mcontainer");
    const showdata = (mcontainer, searcharr) =>{
        parent2.innerHTML = null;

        searcharr.forEach(( {imageUrl, name, price, cutPrice} ) => {
            let productdiv = document.createElement("div");
            productdiv.setAttribute('id', 'productdiv');
            
            let pimage = document.createElement('img');
            pimage.src = imageUrl;
            pimage.setAttribute('id', 'pimage');

            let ptitle = document.createElement('h5');
            ptitle.innerText = name;
            ptitle.setAttribute('id', 'ptitle');

            let smalldiv = document.createElement('div');
            smalldiv.setAttribute('id', 'smalldiv');

            let mainprice = document.createElement('p');
            mainprice.innerText = price;
            mainprice.setAttribute('id', 'mainprice');

            let cutoffprice = document.createElement('p');
            cutoffprice.innerText = cutPrice;
            cutoffprice.setAttribute('id', 'cutoffprice');

            smalldiv.append(cutoffprice, mainprice);
            productdiv.append(pimage, ptitle, smalldiv);
        })

    } 
</script>